<html>
<head>
	<link rel="stylesheet" type="text/css" media="screen" href="/../components/free-jqgrid/css/ui.jqgrid.min.css">
	<!--<link rel="stylesheet" type="text/css" media="screen" href="/../components/jqueryui/jquery-ui.min.css">-->
	<link rel="stylesheet" type="text/css" media="screen" href="/../components/jquery-ui/themes/base/jquery-ui.min.css">
	<link rel="stylesheet" href="/../css/style.css">
</head>
<body>

	<table id="homes_table"></table>
	<div id="pager"></div>

	<script type="text/javascript" src="/../components/jquery/dist/jquery.min.js"></script>
	<!--<script type="text/javascript" src="/../components/jquery-ui/jquery-ui.min.js"></script>-->
	<script type="text/javascript" src="/../components/free-jqgrid/js/jquery.jqgrid.min.js"></script>
	<script type="text/javascript" src="/../components/free-jqgrid/js/i18n/min/grid.locale-bg.js"></script>

	<script type="text/javascript">

		$.extend($.jgrid.defaults, {
			datatype: 'json',
			jsonReader : {
				repeatitems:false,
				total: function(result) {
					//Total number of pages
					return Math.ceil(result.total / result.max);
				},
				records: function(result) {
					//Total number of records
					return result.total;
				},
				id: "_id"
			},
			prmNames: {rows: 'max', search: null},
			height: 'auto',
			viewrecords: true,
			rowList: [10, 20, 50, 100],
			altRows: true,
			//loadonce: true,
			loadError: function(xhr, status, error) {
				alert(error);
			}
		});

		$(document).ready(function(){
			$("#homes_table")
					.jqGrid({
						url:'/homes/data',
						editurl:'/homes/data',
						colModel:[
							//{name:'_id', label: 'ID', width: 50, hidden: true, editable: true, editoptions:{disabled: true}},
							{name:'name', label: 'Име', width: 300, editable: true},
							{name:'area', label: 'Област', width: 100, editable: true},
							{name:'township', label: 'Град', width: 100, editable: true},
							{name:'address', label: 'Адрес', width: 100, editable: true},
							{name:'telephone', label: 'Телефон', width: 80, editable: true},
							{name:'principal', label: 'Директор', width: 100, editable: true}
						],
						caption: "Домове",
						pager : '#pager',
						height: 'auto'
					}).navGrid('#pager', {edit:true,add:true,del:true},
					{},
					{},
					{},
					{multipleSearch:true, multipleGroup:false});
		})
	</script>

</body>
</html>
